<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />

<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<link rel= "stylesheet" type= "text/css" href= "./index.css">

<script type="text/javascript" type="text/javascript">
  var ros = new ROSLIB.Ros({
    url : 'ws://localhost:9090'
  });

  ros.on('connection', function() {
    document.getElementById("status").innerHTML = "Connected";
  });

  ros.on('error', function(error) {
    document.getElementById("status").innerHTML = "Error";
  });

  ros.on('close', function() {
    document.getElementById("status").innerHTML = "Closed";
  });

  var txt_listener = new ROSLIB.Topic({
    ros : ros,
    name : '/txt_msg',
    messageType : 'std_msgs/String'
  });

  txt_listener.subscribe(function(m) {
    document.getElementById("msg").innerHTML = m.data;
  });

  hub_dir_listener = new ROSLIB.Topic({
    ros : ros,
    name : "/hub_dir",
    messageType : 'std_msgs/String'
  });

  move = function () {
    var dir = new ROSLIB.Message({
      data: "hello"
    });
    hub_dir_listener.publish(dir);
  }

  formatMsg = function(id, msg) {
    return new ROSLIB.Message({
      data: id + msg
    });
  }

  stop = function(id) {
    hub_dir_listener.publish(formatMsg(id, "stop"));
  }
  start = function(id) {
    hub_dir_listener.publish(formatMsg(id, "start"));
  }
  fwd = function(id) {
    hub_dir_listener.publish(formatMsg(id, "fwd"));
  }
  ffwd = function(id) {
    hub_dir_listener.publish(formatMsg(id, "ffwd"));
  }
  bwd = function(id) {
    hub_dir_listener.publish(formatMsg(id, "bwd"));
  }
  fbwd = function(id) {
    hub_dir_listener.publish(formatMsg(id, "fbwd"));
  }
  left = function(id) {
    hub_dir_listener.publish(formatMsg(id, "left"));
  }
  right = function(id) {
    hub_dir_listener.publish(formatMsg(id, "right"));
  }
  pivotl = function(id) {
    hub_dir_listener.publish(formatMsg(id, "pivotl"));
  }
  pivotr = function(id) {
    hub_dir_listener.publish(formatMsg(id, "pivotr"));
  }

</script>
</head>

<body>
  <h1>Simple ROS User Interface</h1>
  <p>Connection status: <span id="status"></span></p>
  <p>Last /txt_msg received: <span id="msg"></span></p>
  <div class="statuses">
      <div class="chair_monitor" id="1">
          <h2>Chair 1</h2>
          <div class="status offline">
            OFFLINE
        </div>
        <br>
        <div class="chair_control">
          <button>START</button>
          <br>
          <button>STOP</button>
          <br>
        </div>
          
      </div>
      <div class="chair_monitor" id="2">
          <h2>Chair 2</h2>
          <div class="status offline">
            OFFLINE
        </div>
        <br>
        <div class="chair_control">
          <div class="directions">
            <button class="go">GO</button>
            <button id="2" onclick="ffwd(this.id)">â¤Š</button>
            <button id="2" onclick="fwd(this.id)">â†‘</button>
            <div>
              <button id="2" onclick="pivotl(this.id)">âŸ²</button>
              <button id="2" onclick="left(this.id)">â¬‰</button>
              <button id="2" onclick="stop(this.id)">ðŸ›‘</button>
              <button id="2" onclick="right(this.id)">â¬ˆ</button>
              <button id="2" onclick="pivotr(this.id)">âŸ³</button>
            </div>
            <button id="2" onclick="bwd(this.id)">â†“</button>
            <button id="2" onclick="fbwd(this.id)">â¤‹</button>
          </div>
          <br>
          <button>START</button>
          <button>STOP</button>
          <button>AUTO</button>
          <br>
        </div>
      </div>
      <div class="chair_monitor" id="3">
          <h2>Chair 3</h2>
          <div class="status offline">
              OFFLINE
          </div>
          <br>
          <div class="chair_control">
            <button>START</button>
            <br>
            <button>STOP</button>
            <br>
          </div>
      </div>
      <div class="chair_monitor backup" id="backup">
          <h2>Chair 4 (backup)</h2>
          <div class="status offline">
            OFFLINE
        </div>
      </div>
  </div>
</body>
</html>